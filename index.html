<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Bike Race Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind CDN (como usabas antes) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Firebase CDN -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <link rel="stylesheet" href="styles/global.css" />
</head>

<body class="bg-gray-900 text-white min-h-screen flex items-center justify-center">

<div id="app" class="w-full max-w-4xl mx-auto">

  <!-- ================= INICIO ================= -->
  <section id="inicio" class="page active text-center">
    <h1 class="text-4xl font-bold mb-6">ðŸš´ Bike Race</h1>

    <button id="btnLocal" class="btn-primary">Jugar</button>
    <button id="btnOnline" class="btn-secondary mt-4">Multijugador Online</button>
  </section>

  <!-- ================= SELECCIÃ“N MODO ================= -->
  <section id="seleccionModo" class="page hidden text-center">
    <h2 class="text-2xl mb-6">Seleccionar modo</h2>

    <button class="mode-btn btn-primary" data-mode="single">Individual</button>
    <button class="mode-btn btn-primary mt-3" data-mode="multi">Multijugador Local</button>

    <button id="volverInicio" class="btn-secondary mt-6">Volver</button>
  </section>

  <!-- ================= ONLINE ================= -->
  <section id="paginaOnline" class="page hidden text-center">

    <h2 class="text-2xl mb-4">Multijugador Online</h2>

    <div id="onlineStatus" class="mb-4 text-yellow-400"></div>

    <!-- Opciones -->
    <div id="opcionesView">
      <button id="btnCrearSala" class="btn-primary">Crear Sala</button>
      <button id="btnUnirseSala" class="btn-primary mt-3">Unirse a Sala</button>
    </div>

    <!-- Crear sala -->
    <div id="crearSalaView" class="hidden">
      <p class="mt-4">Creando sala...</p>
    </div>

    <!-- Esperando -->
    <div id="esperandoView" class="hidden">
      <p class="mt-4">Esperando rival</p>
      <p class="mt-2 text-xl">CÃ³digo: <span id="salaId" class="font-bold"></span></p>
    </div>

    <!-- Unirse -->
    <div id="unirseSalaView" class="hidden">
      <input id="inputCodigoSala" maxlength="4"
        class="text-black px-4 py-2 rounded"
        placeholder="CÃ³digo sala" />
      <button id="btnConectarSala" class="btn-primary mt-3">Conectar</button>
    </div>

    <!-- Conectado -->
    <div id="conectadoView" class="hidden">
      <p id="miRol" class="mb-2"></p>
      <p>Jugador 1: <span id="p1StatusOnline">â€”</span></p>
      <p>Jugador 2: <span id="p2StatusOnline">â€”</span></p>

      <button id="btnIniciarOnline" class="btn-primary mt-4">Iniciar Carrera</button>
    </div>

    <button id="volverDesdeOnline" class="btn-secondary mt-6">Volver</button>
  </section>

  <!-- ================= JUEGO ================= -->
  <section id="juegoCarrera" class="page hidden">

    <div class="flex justify-between mb-2">
      <div>Modo: <span id="modoDisplay"></span></div>
      <div>Tiempo: <span id="tiempoRestante">60</span>s</div>
    </div>

    <div class="track">

      <!-- Player 1 -->
      <div class="lane" id="lane1">
        <div id="player1Container" class="player">
          <img id="bike1" src="https://i.imgur.com/9XnQZ5H.png" class="bike" />
        </div>
      </div>

      <!-- Player 2 -->
      <div class="lane hidden" id="lane2">
        <div id="player2Container" class="player">
          <img id="bike2" src="https://i.imgur.com/9XnQZ5H.png" class="bike red" />
        </div>
      </div>
    </div>

    <!-- Stats -->
    <div class="grid grid-cols-2 gap-4 mt-4">
      <div>
        <h3>Jugador 1</h3>
        <p id="p1Speed">0 km/h</p>
        <p id="p1Dist">0 m</p>
        <div class="progress"><div id="p1ProgressFill"></div></div>
        <p id="p1Percent">0%</p>
      </div>

      <div id="progressP2" class="hidden">
        <h3>Jugador 2</h3>
        <p id="p2Speed">0 km/h</p>
        <p id="p2Dist">0 m</p>
        <div class="progress"><div id="p2ProgressFill"></div></div>
        <p id="p2Percent">0%</p>
      </div>
    </div>

    <!-- Controles -->
    <div class="mt-4 flex justify-center gap-4">
      <button id="btnP1Click" class="btn-primary">Pedalear P1</button>
      <button id="btnP2Click" class="btn-primary hidden">Pedalear P2</button>
    </div>
  </section>

  <!-- ================= RESULTADOS ================= -->
  <section id="resultados" class="page hidden text-center">
    <h2 id="winnerText" class="text-3xl mb-4"></h2>
    <div id="resultsTable" class="mb-4"></div>

    <button id="btnPlayAgain" class="btn-primary">Jugar otra vez</button>
    <button id="btnBackHome" class="btn-secondary mt-3">Inicio</button>
  </section>

</div>

<!-- Scripts -->
<script src="game.js"></script>
<script type="module" src="online.js"></script>

</body>
</html>
